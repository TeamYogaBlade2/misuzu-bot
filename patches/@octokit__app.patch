diff --git a/README.md b/README.md
index 09c486e6af34d746d5424aebd01dea2093fd98aa..e31c6e0bddb1be4ab7b037644c32f5bd7a687273 100644
--- a/README.md
+++ b/README.md
@@ -431,6 +431,97 @@ Used for internal logging. Defaults to [`console`](https://developer.mozilla.org
   </tbody>
 </table>
 
+### `createWebMiddleware(app, options)`
+
+Middleware for environments using standard Web API [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request) and [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) objects, such as Deno, Bun, Cloudflare Workers, AWS Lambda.
+
+```js
+import { App, createWebMiddleware } from "@octokit/app";
+
+const app = new App({
+  appId: 123,
+  privateKey: "-----BEGIN PRIVATE KEY-----\n...",
+  oauth: {
+    clientId: "0123",
+    clientSecret: "0123secret",
+  },
+  webhooks: {
+    secret: "secret",
+  },
+});
+
+const middleware = createWebMiddleware(app);
+// Example with a Fetch handler (Deno / Bun / Node with Fetch API)
+async function handler(request) {
+  const response = await middleware(request);
+  if (response) return response;
+
+  // If middleware returns undefined, the route was not handled
+  return new Response("Not Found", { status: 404 });
+}
+
+Deno.serve(handler);
+// can now receive user authorization callbacks at /api/github/*
+```
+
+The middleware returned from `createWebMiddleware` returns a `Response` if the request matches, or `undefined` otherwise.
+
+<table width="100%">
+  <thead align=left>
+    <tr>
+      <th width=150>
+        name
+      </th>
+      <th width=70>
+        type
+      </th>
+      <th>
+        description
+      </th>
+    </tr>
+  </thead>
+  <tbody align=left valign=top>
+    <tr>
+      <th>
+        <code>app</code>
+      </th>
+      <th>
+        <code>App instance</code>
+      </th>
+      <td>
+        <strong>Required</strong>.
+      </td>
+    </tr>
+    <tr>
+      <th>
+        <code>options.pathPrefix</code>
+      </th>
+      <th>
+        <code>string</code>
+      </th>
+      <td>
+
+All exposed paths will be prefixed with the provided prefix. Defaults to `"/api/github"`
+
+</td>
+    </tr>
+    <tr>
+      <td>
+        <code>log</code>
+        <em>
+          object
+        </em>
+      </td>
+      <td>
+
+Used for internal logging. Defaults to [`console`](https://developer.mozilla.org/en-US/docs/Web/API/console) with `debug` and `info` doing nothing.
+
+      </td>
+    </tr>
+
+  </tbody>
+</table>
+
 ## Contributing
 
 See [CONTRIBUTING.md](CONTRIBUTING.md)
diff --git a/dist-node/index.js b/dist-node/index.js
index 1bcc990320478e48caeb625dc02b220add5f4cbe..b359e04a5b320024467f6bc9b7c92c8dd64ee636 100644
--- a/dist-node/index.js
+++ b/dist-node/index.js
@@ -4,7 +4,7 @@ import { createAppAuth as createAppAuth3 } from "@octokit/auth-app";
 import { OAuthApp } from "@octokit/oauth-app";
 
 // pkg/dist-src/version.js
-var VERSION = "16.1.1";
+var VERSION = "0.0.0-development";
 
 // pkg/dist-src/webhooks.js
 import { createAppAuth } from "@octokit/auth-app";
@@ -243,6 +243,65 @@ async function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, reque
   }
 }
 
+// pkg/dist-src/middleware/web/index.js
+import { createWebWorkerHandler as oauthWebMiddleware } from "@octokit/oauth-app";
+import { createWebMiddleware as webhooksWebMiddleware } from "@octokit/webhooks";
+function noop2() {
+}
+function createWebMiddleware(app, options = {}) {
+  const log = Object.assign(
+    {
+      debug: noop2,
+      info: noop2,
+      warn: console.warn.bind(console),
+      error: console.error.bind(console)
+    },
+    options.log
+  );
+  const optionsWithDefaults = {
+    pathPrefix: "/api/github",
+    ...options,
+    log
+  };
+  const webhooksMiddleware = webhooksWebMiddleware(app.webhooks, {
+    path: optionsWithDefaults.pathPrefix + "/webhooks",
+    log
+  });
+  const oauthMiddleware = oauthWebMiddleware(app.oauth, {
+    pathPrefix: optionsWithDefaults.pathPrefix + "/oauth"
+  });
+  return middleware2.bind(
+    null,
+    optionsWithDefaults.pathPrefix,
+    webhooksMiddleware,
+    oauthMiddleware
+  );
+}
+async function middleware2(pathPrefix, webhooksMiddleware, oauthMiddleware, request) {
+  const { pathname } = new URL(request.url, "http://localhost");
+  if (pathname.startsWith(`${pathPrefix}/`)) {
+    if (pathname === `${pathPrefix}/webhooks`) {
+      return webhooksMiddleware(request);
+    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {
+      return oauthMiddleware(request);
+    } else {
+      return new Response(
+        JSON.stringify({
+          error: `Unknown route: ${request.method} ${request.url}`
+        }),
+        {
+          status: 404,
+          headers: {
+            "content-type": "application/json"
+          }
+        }
+      );
+    }
+  } else {
+    return void 0;
+  }
+}
+
 // pkg/dist-src/index.js
 var App = class {
   static VERSION = VERSION;
@@ -337,5 +396,6 @@ var App = class {
 };
 export {
   App,
-  createNodeMiddleware
+  createNodeMiddleware,
+  createWebMiddleware
 };
diff --git a/dist-node/index.js.map b/dist-node/index.js.map
index 1b53682db4a81cebd83729599dc66f5dc06ee479..eba56dd72f4116857ff86dd1b37f35a8199ea969 100644
--- a/dist-node/index.js.map
+++ b/dist-node/index.js.map
@@ -1,7 +1,7 @@
 {
   "version": 3,
-  "sources": ["../dist-src/index.js", "../dist-src/version.js", "../dist-src/webhooks.js", "../dist-src/each-installation.js", "../dist-src/get-installation-octokit.js", "../dist-src/each-repository.js", "../dist-src/get-installation-url.js", "../dist-src/middleware/node/index.js"],
-  "sourcesContent": ["import { Octokit as OctokitCore } from \"@octokit/core\";\nimport { createAppAuth } from \"@octokit/auth-app\";\nimport { OAuthApp } from \"@octokit/oauth-app\";\nimport { VERSION } from \"./version.js\";\nimport { webhooks } from \"./webhooks.js\";\nimport { eachInstallationFactory } from \"./each-installation.js\";\nimport { eachRepositoryFactory } from \"./each-repository.js\";\nimport { getInstallationOctokit } from \"./get-installation-octokit.js\";\nimport { getInstallationUrlFactory } from \"./get-installation-url.js\";\nclass App {\n  static VERSION = VERSION;\n  static defaults(defaults) {\n    const AppWithDefaults = class extends this {\n      constructor(...args) {\n        super({\n          ...defaults,\n          ...args[0]\n        });\n      }\n    };\n    return AppWithDefaults;\n  }\n  octokit;\n  // @ts-ignore calling app.webhooks will throw a helpful error when options.webhooks is not set\n  webhooks;\n  // @ts-ignore calling app.oauth will throw a helpful error when options.oauth is not set\n  oauth;\n  getInstallationOctokit;\n  eachInstallation;\n  eachRepository;\n  getInstallationUrl;\n  log;\n  constructor(options) {\n    const Octokit = options.Octokit || OctokitCore;\n    const authOptions = Object.assign(\n      {\n        appId: options.appId,\n        privateKey: options.privateKey\n      },\n      options.oauth ? {\n        clientId: options.oauth.clientId,\n        clientSecret: options.oauth.clientSecret\n      } : {}\n    );\n    const octokitOptions = {\n      authStrategy: createAppAuth,\n      auth: authOptions\n    };\n    if (\"log\" in options && typeof options.log !== \"undefined\") {\n      octokitOptions.log = options.log;\n    }\n    this.octokit = new Octokit(octokitOptions);\n    this.log = Object.assign(\n      {\n        debug: () => {\n        },\n        info: () => {\n        },\n        warn: console.warn.bind(console),\n        error: console.error.bind(console)\n      },\n      options.log\n    );\n    if (options.webhooks) {\n      this.webhooks = webhooks(this.octokit, options.webhooks);\n    } else {\n      Object.defineProperty(this, \"webhooks\", {\n        get() {\n          throw new Error(\"[@octokit/app] webhooks option not set\");\n        }\n      });\n    }\n    if (options.oauth) {\n      this.oauth = new OAuthApp({\n        ...options.oauth,\n        clientType: \"github-app\",\n        Octokit\n      });\n    } else {\n      Object.defineProperty(this, \"oauth\", {\n        get() {\n          throw new Error(\n            \"[@octokit/app] oauth.clientId / oauth.clientSecret options are not set\"\n          );\n        }\n      });\n    }\n    this.getInstallationOctokit = getInstallationOctokit.bind(\n      null,\n      this\n    );\n    this.eachInstallation = eachInstallationFactory(\n      this\n    );\n    this.eachRepository = eachRepositoryFactory(\n      this\n    );\n    this.getInstallationUrl = getInstallationUrlFactory(this);\n  }\n}\nimport { createNodeMiddleware } from \"./middleware/node/index.js\";\nexport {\n  App,\n  createNodeMiddleware\n};\n", "const VERSION = \"16.1.1\";\nexport {\n  VERSION\n};\n", "import { createAppAuth } from \"@octokit/auth-app\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nimport { Webhooks } from \"@octokit/webhooks\";\nfunction webhooks(appOctokit, options) {\n  return new Webhooks({\n    secret: options.secret,\n    transform: async (event) => {\n      if (!(\"installation\" in event.payload) || typeof event.payload.installation !== \"object\") {\n        const octokit2 = new appOctokit.constructor({\n          authStrategy: createUnauthenticatedAuth,\n          auth: {\n            reason: `\"installation\" key missing in webhook event payload`\n          }\n        });\n        return {\n          ...event,\n          octokit: octokit2\n        };\n      }\n      const installationId = event.payload.installation.id;\n      const octokit = await appOctokit.auth({\n        type: \"installation\",\n        installationId,\n        factory(auth) {\n          return new auth.octokit.constructor({\n            ...auth.octokitOptions,\n            authStrategy: createAppAuth,\n            ...{\n              auth: {\n                ...auth,\n                installationId\n              }\n            }\n          });\n        }\n      });\n      octokit.hook.before(\"request\", (options2) => {\n        options2.headers[\"x-github-delivery\"] = event.id;\n      });\n      return {\n        ...event,\n        octokit\n      };\n    }\n  });\n}\nexport {\n  webhooks\n};\n", "import { composePaginateRest } from \"@octokit/plugin-paginate-rest\";\nimport { getInstallationOctokit } from \"./get-installation-octokit.js\";\nfunction eachInstallationFactory(app) {\n  return Object.assign(eachInstallation.bind(null, app), {\n    iterator: eachInstallationIterator.bind(null, app)\n  });\n}\nasync function eachInstallation(app, callback) {\n  const i = eachInstallationIterator(app)[Symbol.asyncIterator]();\n  let result = await i.next();\n  while (!result.done) {\n    await callback(result.value);\n    result = await i.next();\n  }\n}\nfunction eachInstallationIterator(app) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const iterator = composePaginateRest.iterator(\n        app.octokit,\n        \"GET /app/installations\"\n      );\n      for await (const { data: installations } of iterator) {\n        for (const installation of installations) {\n          const installationOctokit = await getInstallationOctokit(\n            app,\n            installation.id\n          );\n          yield { octokit: installationOctokit, installation };\n        }\n      }\n    }\n  };\n}\nexport {\n  eachInstallation,\n  eachInstallationFactory,\n  eachInstallationIterator\n};\n", "import { createAppAuth } from \"@octokit/auth-app\";\nasync function getInstallationOctokit(app, installationId) {\n  return app.octokit.auth({\n    type: \"installation\",\n    installationId,\n    factory(auth) {\n      const options = {\n        ...auth.octokitOptions,\n        authStrategy: createAppAuth,\n        ...{ auth: { ...auth, installationId } }\n      };\n      return new auth.octokit.constructor(options);\n    }\n  });\n}\nexport {\n  getInstallationOctokit\n};\n", "import { composePaginateRest } from \"@octokit/plugin-paginate-rest\";\nfunction eachRepositoryFactory(app) {\n  return Object.assign(eachRepository.bind(null, app), {\n    iterator: eachRepositoryIterator.bind(null, app)\n  });\n}\nasync function eachRepository(app, queryOrCallback, callback) {\n  const i = eachRepositoryIterator(\n    app,\n    callback ? queryOrCallback : void 0\n  )[Symbol.asyncIterator]();\n  let result = await i.next();\n  while (!result.done) {\n    if (callback) {\n      await callback(result.value);\n    } else {\n      await queryOrCallback(result.value);\n    }\n    result = await i.next();\n  }\n}\nfunction singleInstallationIterator(app, installationId) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      yield {\n        octokit: await app.getInstallationOctokit(installationId)\n      };\n    }\n  };\n}\nfunction eachRepositoryIterator(app, query) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const iterator = query ? singleInstallationIterator(app, query.installationId) : app.eachInstallation.iterator();\n      for await (const { octokit } of iterator) {\n        const repositoriesIterator = composePaginateRest.iterator(\n          octokit,\n          \"GET /installation/repositories\"\n        );\n        for await (const { data: repositories } of repositoriesIterator) {\n          for (const repository of repositories) {\n            yield { octokit, repository };\n          }\n        }\n      }\n    }\n  };\n}\nexport {\n  eachRepository,\n  eachRepositoryFactory,\n  eachRepositoryIterator\n};\n", "function getInstallationUrlFactory(app) {\n  let installationUrlBasePromise;\n  return async function getInstallationUrl(options = {}) {\n    if (!installationUrlBasePromise) {\n      installationUrlBasePromise = getInstallationUrlBase(app);\n    }\n    const installationUrlBase = await installationUrlBasePromise;\n    const installationUrl = new URL(installationUrlBase);\n    if (options.target_id !== void 0) {\n      installationUrl.pathname += \"/permissions\";\n      installationUrl.searchParams.append(\n        \"target_id\",\n        options.target_id.toFixed()\n      );\n    }\n    if (options.state !== void 0) {\n      installationUrl.searchParams.append(\"state\", options.state);\n    }\n    return installationUrl.href;\n  };\n}\nasync function getInstallationUrlBase(app) {\n  const { data: appInfo } = await app.octokit.request(\"GET /app\");\n  if (!appInfo) {\n    throw new Error(\"[@octokit/app] unable to fetch metadata for app\");\n  }\n  return `${appInfo.html_url}/installations/new`;\n}\nexport {\n  getInstallationUrlFactory\n};\n", "import {\n  createNodeMiddleware as oauthNodeMiddleware,\n  sendNodeResponse,\n  unknownRouteResponse\n} from \"@octokit/oauth-app\";\nimport { createNodeMiddleware as webhooksNodeMiddleware } from \"@octokit/webhooks\";\nfunction noop() {\n}\nfunction createNodeMiddleware(app, options = {}) {\n  const log = Object.assign(\n    {\n      debug: noop,\n      info: noop,\n      warn: console.warn.bind(console),\n      error: console.error.bind(console)\n    },\n    options.log\n  );\n  const optionsWithDefaults = {\n    pathPrefix: \"/api/github\",\n    ...options,\n    log\n  };\n  const webhooksMiddleware = webhooksNodeMiddleware(app.webhooks, {\n    path: optionsWithDefaults.pathPrefix + \"/webhooks\",\n    log\n  });\n  const oauthMiddleware = oauthNodeMiddleware(app.oauth, {\n    pathPrefix: optionsWithDefaults.pathPrefix + \"/oauth\"\n  });\n  return middleware.bind(\n    null,\n    optionsWithDefaults.pathPrefix,\n    webhooksMiddleware,\n    oauthMiddleware\n  );\n}\nasync function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, request, response, next) {\n  const { pathname } = new URL(request.url, \"http://localhost\");\n  if (pathname.startsWith(`${pathPrefix}/`)) {\n    if (pathname === `${pathPrefix}/webhooks`) {\n      webhooksMiddleware(request, response);\n    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {\n      oauthMiddleware(request, response);\n    } else {\n      sendNodeResponse(unknownRouteResponse(request), response);\n    }\n    return true;\n  } else {\n    next?.();\n    return false;\n  }\n}\nexport {\n  createNodeMiddleware,\n  middleware\n};\n"],
-  "mappings": "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",
-  "names": ["createAppAuth", "createAppAuth", "composePaginateRest", "createAppAuth"]
+  "sources": ["../dist-src/index.js", "../dist-src/version.js", "../dist-src/webhooks.js", "../dist-src/each-installation.js", "../dist-src/get-installation-octokit.js", "../dist-src/each-repository.js", "../dist-src/get-installation-url.js", "../dist-src/middleware/node/index.js", "../dist-src/middleware/web/index.js"],
+  "sourcesContent": ["import { Octokit as OctokitCore } from \"@octokit/core\";\nimport { createAppAuth } from \"@octokit/auth-app\";\nimport { OAuthApp } from \"@octokit/oauth-app\";\nimport { VERSION } from \"./version.js\";\nimport { webhooks } from \"./webhooks.js\";\nimport { eachInstallationFactory } from \"./each-installation.js\";\nimport { eachRepositoryFactory } from \"./each-repository.js\";\nimport { getInstallationOctokit } from \"./get-installation-octokit.js\";\nimport { getInstallationUrlFactory } from \"./get-installation-url.js\";\nclass App {\n  static VERSION = VERSION;\n  static defaults(defaults) {\n    const AppWithDefaults = class extends this {\n      constructor(...args) {\n        super({\n          ...defaults,\n          ...args[0]\n        });\n      }\n    };\n    return AppWithDefaults;\n  }\n  octokit;\n  // @ts-ignore calling app.webhooks will throw a helpful error when options.webhooks is not set\n  webhooks;\n  // @ts-ignore calling app.oauth will throw a helpful error when options.oauth is not set\n  oauth;\n  getInstallationOctokit;\n  eachInstallation;\n  eachRepository;\n  getInstallationUrl;\n  log;\n  constructor(options) {\n    const Octokit = options.Octokit || OctokitCore;\n    const authOptions = Object.assign(\n      {\n        appId: options.appId,\n        privateKey: options.privateKey\n      },\n      options.oauth ? {\n        clientId: options.oauth.clientId,\n        clientSecret: options.oauth.clientSecret\n      } : {}\n    );\n    const octokitOptions = {\n      authStrategy: createAppAuth,\n      auth: authOptions\n    };\n    if (\"log\" in options && typeof options.log !== \"undefined\") {\n      octokitOptions.log = options.log;\n    }\n    this.octokit = new Octokit(octokitOptions);\n    this.log = Object.assign(\n      {\n        debug: () => {\n        },\n        info: () => {\n        },\n        warn: console.warn.bind(console),\n        error: console.error.bind(console)\n      },\n      options.log\n    );\n    if (options.webhooks) {\n      this.webhooks = webhooks(this.octokit, options.webhooks);\n    } else {\n      Object.defineProperty(this, \"webhooks\", {\n        get() {\n          throw new Error(\"[@octokit/app] webhooks option not set\");\n        }\n      });\n    }\n    if (options.oauth) {\n      this.oauth = new OAuthApp({\n        ...options.oauth,\n        clientType: \"github-app\",\n        Octokit\n      });\n    } else {\n      Object.defineProperty(this, \"oauth\", {\n        get() {\n          throw new Error(\n            \"[@octokit/app] oauth.clientId / oauth.clientSecret options are not set\"\n          );\n        }\n      });\n    }\n    this.getInstallationOctokit = getInstallationOctokit.bind(\n      null,\n      this\n    );\n    this.eachInstallation = eachInstallationFactory(\n      this\n    );\n    this.eachRepository = eachRepositoryFactory(\n      this\n    );\n    this.getInstallationUrl = getInstallationUrlFactory(this);\n  }\n}\nimport { createNodeMiddleware } from \"./middleware/node/index.js\";\nimport { createWebMiddleware } from \"./middleware/web/index.js\";\nexport {\n  App,\n  createNodeMiddleware,\n  createWebMiddleware\n};\n", "const VERSION = \"0.0.0-development\";\nexport {\n  VERSION\n};\n", "import { createAppAuth } from \"@octokit/auth-app\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nimport { Webhooks } from \"@octokit/webhooks\";\nfunction webhooks(appOctokit, options) {\n  return new Webhooks({\n    secret: options.secret,\n    transform: async (event) => {\n      if (!(\"installation\" in event.payload) || typeof event.payload.installation !== \"object\") {\n        const octokit2 = new appOctokit.constructor({\n          authStrategy: createUnauthenticatedAuth,\n          auth: {\n            reason: `\"installation\" key missing in webhook event payload`\n          }\n        });\n        return {\n          ...event,\n          octokit: octokit2\n        };\n      }\n      const installationId = event.payload.installation.id;\n      const octokit = await appOctokit.auth({\n        type: \"installation\",\n        installationId,\n        factory(auth) {\n          return new auth.octokit.constructor({\n            ...auth.octokitOptions,\n            authStrategy: createAppAuth,\n            ...{\n              auth: {\n                ...auth,\n                installationId\n              }\n            }\n          });\n        }\n      });\n      octokit.hook.before(\"request\", (options2) => {\n        options2.headers[\"x-github-delivery\"] = event.id;\n      });\n      return {\n        ...event,\n        octokit\n      };\n    }\n  });\n}\nexport {\n  webhooks\n};\n", "import { composePaginateRest } from \"@octokit/plugin-paginate-rest\";\nimport { getInstallationOctokit } from \"./get-installation-octokit.js\";\nfunction eachInstallationFactory(app) {\n  return Object.assign(eachInstallation.bind(null, app), {\n    iterator: eachInstallationIterator.bind(null, app)\n  });\n}\nasync function eachInstallation(app, callback) {\n  const i = eachInstallationIterator(app)[Symbol.asyncIterator]();\n  let result = await i.next();\n  while (!result.done) {\n    await callback(result.value);\n    result = await i.next();\n  }\n}\nfunction eachInstallationIterator(app) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const iterator = composePaginateRest.iterator(\n        app.octokit,\n        \"GET /app/installations\"\n      );\n      for await (const { data: installations } of iterator) {\n        for (const installation of installations) {\n          const installationOctokit = await getInstallationOctokit(\n            app,\n            installation.id\n          );\n          yield { octokit: installationOctokit, installation };\n        }\n      }\n    }\n  };\n}\nexport {\n  eachInstallation,\n  eachInstallationFactory,\n  eachInstallationIterator\n};\n", "import { createAppAuth } from \"@octokit/auth-app\";\nasync function getInstallationOctokit(app, installationId) {\n  return app.octokit.auth({\n    type: \"installation\",\n    installationId,\n    factory(auth) {\n      const options = {\n        ...auth.octokitOptions,\n        authStrategy: createAppAuth,\n        ...{ auth: { ...auth, installationId } }\n      };\n      return new auth.octokit.constructor(options);\n    }\n  });\n}\nexport {\n  getInstallationOctokit\n};\n", "import { composePaginateRest } from \"@octokit/plugin-paginate-rest\";\nfunction eachRepositoryFactory(app) {\n  return Object.assign(eachRepository.bind(null, app), {\n    iterator: eachRepositoryIterator.bind(null, app)\n  });\n}\nasync function eachRepository(app, queryOrCallback, callback) {\n  const i = eachRepositoryIterator(\n    app,\n    callback ? queryOrCallback : void 0\n  )[Symbol.asyncIterator]();\n  let result = await i.next();\n  while (!result.done) {\n    if (callback) {\n      await callback(result.value);\n    } else {\n      await queryOrCallback(result.value);\n    }\n    result = await i.next();\n  }\n}\nfunction singleInstallationIterator(app, installationId) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      yield {\n        octokit: await app.getInstallationOctokit(installationId)\n      };\n    }\n  };\n}\nfunction eachRepositoryIterator(app, query) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const iterator = query ? singleInstallationIterator(app, query.installationId) : app.eachInstallation.iterator();\n      for await (const { octokit } of iterator) {\n        const repositoriesIterator = composePaginateRest.iterator(\n          octokit,\n          \"GET /installation/repositories\"\n        );\n        for await (const { data: repositories } of repositoriesIterator) {\n          for (const repository of repositories) {\n            yield { octokit, repository };\n          }\n        }\n      }\n    }\n  };\n}\nexport {\n  eachRepository,\n  eachRepositoryFactory,\n  eachRepositoryIterator\n};\n", "function getInstallationUrlFactory(app) {\n  let installationUrlBasePromise;\n  return async function getInstallationUrl(options = {}) {\n    if (!installationUrlBasePromise) {\n      installationUrlBasePromise = getInstallationUrlBase(app);\n    }\n    const installationUrlBase = await installationUrlBasePromise;\n    const installationUrl = new URL(installationUrlBase);\n    if (options.target_id !== void 0) {\n      installationUrl.pathname += \"/permissions\";\n      installationUrl.searchParams.append(\n        \"target_id\",\n        options.target_id.toFixed()\n      );\n    }\n    if (options.state !== void 0) {\n      installationUrl.searchParams.append(\"state\", options.state);\n    }\n    return installationUrl.href;\n  };\n}\nasync function getInstallationUrlBase(app) {\n  const { data: appInfo } = await app.octokit.request(\"GET /app\");\n  if (!appInfo) {\n    throw new Error(\"[@octokit/app] unable to fetch metadata for app\");\n  }\n  return `${appInfo.html_url}/installations/new`;\n}\nexport {\n  getInstallationUrlFactory\n};\n", "import {\n  createNodeMiddleware as oauthNodeMiddleware,\n  sendNodeResponse,\n  unknownRouteResponse\n} from \"@octokit/oauth-app\";\nimport { createNodeMiddleware as webhooksNodeMiddleware } from \"@octokit/webhooks\";\nfunction noop() {\n}\nfunction createNodeMiddleware(app, options = {}) {\n  const log = Object.assign(\n    {\n      debug: noop,\n      info: noop,\n      warn: console.warn.bind(console),\n      error: console.error.bind(console)\n    },\n    options.log\n  );\n  const optionsWithDefaults = {\n    pathPrefix: \"/api/github\",\n    ...options,\n    log\n  };\n  const webhooksMiddleware = webhooksNodeMiddleware(app.webhooks, {\n    path: optionsWithDefaults.pathPrefix + \"/webhooks\",\n    log\n  });\n  const oauthMiddleware = oauthNodeMiddleware(app.oauth, {\n    pathPrefix: optionsWithDefaults.pathPrefix + \"/oauth\"\n  });\n  return middleware.bind(\n    null,\n    optionsWithDefaults.pathPrefix,\n    webhooksMiddleware,\n    oauthMiddleware\n  );\n}\nasync function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, request, response, next) {\n  const { pathname } = new URL(request.url, \"http://localhost\");\n  if (pathname.startsWith(`${pathPrefix}/`)) {\n    if (pathname === `${pathPrefix}/webhooks`) {\n      webhooksMiddleware(request, response);\n    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {\n      oauthMiddleware(request, response);\n    } else {\n      sendNodeResponse(unknownRouteResponse(request), response);\n    }\n    return true;\n  } else {\n    next?.();\n    return false;\n  }\n}\nexport {\n  createNodeMiddleware,\n  middleware\n};\n", "import { createWebWorkerHandler as oauthWebMiddleware } from \"@octokit/oauth-app\";\nimport { createWebMiddleware as webhooksWebMiddleware } from \"@octokit/webhooks\";\nfunction noop() {\n}\nfunction createWebMiddleware(app, options = {}) {\n  const log = Object.assign(\n    {\n      debug: noop,\n      info: noop,\n      warn: console.warn.bind(console),\n      error: console.error.bind(console)\n    },\n    options.log\n  );\n  const optionsWithDefaults = {\n    pathPrefix: \"/api/github\",\n    ...options,\n    log\n  };\n  const webhooksMiddleware = webhooksWebMiddleware(app.webhooks, {\n    path: optionsWithDefaults.pathPrefix + \"/webhooks\",\n    log\n  });\n  const oauthMiddleware = oauthWebMiddleware(app.oauth, {\n    pathPrefix: optionsWithDefaults.pathPrefix + \"/oauth\"\n  });\n  return middleware.bind(\n    null,\n    optionsWithDefaults.pathPrefix,\n    webhooksMiddleware,\n    oauthMiddleware\n  );\n}\nasync function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, request) {\n  const { pathname } = new URL(request.url, \"http://localhost\");\n  if (pathname.startsWith(`${pathPrefix}/`)) {\n    if (pathname === `${pathPrefix}/webhooks`) {\n      return webhooksMiddleware(request);\n    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {\n      return oauthMiddleware(request);\n    } else {\n      return new Response(\n        JSON.stringify({\n          error: `Unknown route: ${request.method} ${request.url}`\n        }),\n        {\n          status: 404,\n          headers: {\n            \"content-type\": \"application/json\"\n          }\n        }\n      );\n    }\n  } else {\n    return void 0;\n  }\n}\nexport {\n  createWebMiddleware,\n  middleware\n};\n"],
+  "mappings": "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",
+  "names": ["createAppAuth", "createAppAuth", "composePaginateRest", "noop", "middleware", "createAppAuth"]
 }
diff --git a/dist-src/index.js b/dist-src/index.js
index eb190c8934621f9c5ab16987ec5ff16f5b38e828..65e904f6774fbf59dc28f4470b240ad72eceabaf 100644
--- a/dist-src/index.js
+++ b/dist-src/index.js
@@ -99,7 +99,9 @@ class App {
   }
 }
 import { createNodeMiddleware } from "./middleware/node/index.js";
+import { createWebMiddleware } from "./middleware/web/index.js";
 export {
   App,
-  createNodeMiddleware
+  createNodeMiddleware,
+  createWebMiddleware
 };
diff --git a/dist-src/middleware/web/index.js b/dist-src/middleware/web/index.js
new file mode 100644
index 0000000000000000000000000000000000000000..5fc72f6f26e43712709b6228e26a82362843a3b1
--- /dev/null
+++ b/dist-src/middleware/web/index.js
@@ -0,0 +1,61 @@
+import { createWebWorkerHandler as oauthWebMiddleware } from "@octokit/oauth-app";
+import { createWebMiddleware as webhooksWebMiddleware } from "@octokit/webhooks";
+function noop() {
+}
+function createWebMiddleware(app, options = {}) {
+  const log = Object.assign(
+    {
+      debug: noop,
+      info: noop,
+      warn: console.warn.bind(console),
+      error: console.error.bind(console)
+    },
+    options.log
+  );
+  const optionsWithDefaults = {
+    pathPrefix: "/api/github",
+    ...options,
+    log
+  };
+  const webhooksMiddleware = webhooksWebMiddleware(app.webhooks, {
+    path: optionsWithDefaults.pathPrefix + "/webhooks",
+    log
+  });
+  const oauthMiddleware = oauthWebMiddleware(app.oauth, {
+    pathPrefix: optionsWithDefaults.pathPrefix + "/oauth"
+  });
+  return middleware.bind(
+    null,
+    optionsWithDefaults.pathPrefix,
+    webhooksMiddleware,
+    oauthMiddleware
+  );
+}
+async function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, request) {
+  const { pathname } = new URL(request.url, "http://localhost");
+  if (pathname.startsWith(`${pathPrefix}/`)) {
+    if (pathname === `${pathPrefix}/webhooks`) {
+      return webhooksMiddleware(request);
+    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {
+      return oauthMiddleware(request);
+    } else {
+      return new Response(
+        JSON.stringify({
+          error: `Unknown route: ${request.method} ${request.url}`
+        }),
+        {
+          status: 404,
+          headers: {
+            "content-type": "application/json"
+          }
+        }
+      );
+    }
+  } else {
+    return void 0;
+  }
+}
+export {
+  createWebMiddleware,
+  middleware
+};
diff --git a/dist-src/version.js b/dist-src/version.js
index 82ef2d3c57f7868a9eb8f8f0e6d11375a2e944c7..29ef8a883c6f14757da4b24f5bb706295f0770c8 100644
--- a/dist-src/version.js
+++ b/dist-src/version.js
@@ -1,4 +1,4 @@
-const VERSION = "16.1.1";
+const VERSION = "0.0.0-development";
 export {
   VERSION
 };
diff --git a/dist-types/index.d.ts b/dist-types/index.d.ts
index 2c66cba8a433c931ee5eb2a47b9c4fc9a6c9e2eb..e30c51222f5350d9b9686fc8cd4fb07f54518344 100644
--- a/dist-types/index.d.ts
+++ b/dist-types/index.d.ts
@@ -53,3 +53,4 @@ export declare class App<TOptions extends Options = Options> {
     constructor(options: ConstructorOptions<TOptions>);
 }
 export { createNodeMiddleware } from "./middleware/node/index.js";
+export { createWebMiddleware } from "./middleware/web/index.js";
diff --git a/dist-types/middleware/node/index.d.ts b/dist-types/middleware/node/index.d.ts
index 065a8151cf80a64f3c676880924e7478b7f4b390..88a2c84f563f4884acf0dbd9715291196283c1f7 100644
--- a/dist-types/middleware/node/index.d.ts
+++ b/dist-types/middleware/node/index.d.ts
@@ -1,11 +1,7 @@
 type IncomingMessage = any;
 type ServerResponse = any;
 import type { App } from "../../index.js";
-import type { Options } from "../../types.js";
-export type MiddlewareOptions = {
-    pathPrefix?: string;
-    log?: Options["log"];
-};
+import type { MiddlewareOptions } from "../types.js";
 export declare function createNodeMiddleware(app: App, options?: MiddlewareOptions): (request: any, response: any, next?: Function | undefined) => Promise<boolean>;
 export declare function middleware(pathPrefix: string, webhooksMiddleware: any, oauthMiddleware: any, request: IncomingMessage, response: ServerResponse, next?: Function): Promise<boolean>;
 export {};
diff --git a/dist-types/middleware/types.d.ts b/dist-types/middleware/types.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..7d408c97e1122dc9cdb1cc14028de7a1bcc24ad4
--- /dev/null
+++ b/dist-types/middleware/types.d.ts
@@ -0,0 +1,5 @@
+import type { Options } from "../types.js";
+export type MiddlewareOptions = {
+    pathPrefix?: string;
+    log?: Options["log"];
+};
diff --git a/dist-types/middleware/web/index.d.ts b/dist-types/middleware/web/index.d.ts
new file mode 100644
index 0000000000000000000000000000000000000000..fe42e1263de2901a545de9533348c28c27a5a4a2
--- /dev/null
+++ b/dist-types/middleware/web/index.d.ts
@@ -0,0 +1,6 @@
+import { createWebWorkerHandler as oauthWebMiddleware } from "@octokit/oauth-app";
+import { createWebMiddleware as webhooksWebMiddleware } from "@octokit/webhooks";
+import type { App } from "../../index.js";
+import type { MiddlewareOptions } from "../types.js";
+export declare function createWebMiddleware(app: App, options?: MiddlewareOptions): (request: Request) => Promise<Response | undefined>;
+export declare function middleware(pathPrefix: string, webhooksMiddleware: ReturnType<typeof webhooksWebMiddleware>, oauthMiddleware: ReturnType<typeof oauthWebMiddleware>, request: Request): Promise<Response | undefined>;
diff --git a/dist-types/version.d.ts b/dist-types/version.d.ts
index d5989eeac13967898c53358cc9e17e8160d3b5c7..15711f02c26891328e76cf8b65b6ed2fb23cce79 100644
--- a/dist-types/version.d.ts
+++ b/dist-types/version.d.ts
@@ -1 +1 @@
-export declare const VERSION = "16.1.1";
+export declare const VERSION = "0.0.0-development";
diff --git a/dist-web/index.js b/dist-web/index.js
index 1bcc990320478e48caeb625dc02b220add5f4cbe..b359e04a5b320024467f6bc9b7c92c8dd64ee636 100644
--- a/dist-web/index.js
+++ b/dist-web/index.js
@@ -4,7 +4,7 @@ import { createAppAuth as createAppAuth3 } from "@octokit/auth-app";
 import { OAuthApp } from "@octokit/oauth-app";
 
 // pkg/dist-src/version.js
-var VERSION = "16.1.1";
+var VERSION = "0.0.0-development";
 
 // pkg/dist-src/webhooks.js
 import { createAppAuth } from "@octokit/auth-app";
@@ -243,6 +243,65 @@ async function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, reque
   }
 }
 
+// pkg/dist-src/middleware/web/index.js
+import { createWebWorkerHandler as oauthWebMiddleware } from "@octokit/oauth-app";
+import { createWebMiddleware as webhooksWebMiddleware } from "@octokit/webhooks";
+function noop2() {
+}
+function createWebMiddleware(app, options = {}) {
+  const log = Object.assign(
+    {
+      debug: noop2,
+      info: noop2,
+      warn: console.warn.bind(console),
+      error: console.error.bind(console)
+    },
+    options.log
+  );
+  const optionsWithDefaults = {
+    pathPrefix: "/api/github",
+    ...options,
+    log
+  };
+  const webhooksMiddleware = webhooksWebMiddleware(app.webhooks, {
+    path: optionsWithDefaults.pathPrefix + "/webhooks",
+    log
+  });
+  const oauthMiddleware = oauthWebMiddleware(app.oauth, {
+    pathPrefix: optionsWithDefaults.pathPrefix + "/oauth"
+  });
+  return middleware2.bind(
+    null,
+    optionsWithDefaults.pathPrefix,
+    webhooksMiddleware,
+    oauthMiddleware
+  );
+}
+async function middleware2(pathPrefix, webhooksMiddleware, oauthMiddleware, request) {
+  const { pathname } = new URL(request.url, "http://localhost");
+  if (pathname.startsWith(`${pathPrefix}/`)) {
+    if (pathname === `${pathPrefix}/webhooks`) {
+      return webhooksMiddleware(request);
+    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {
+      return oauthMiddleware(request);
+    } else {
+      return new Response(
+        JSON.stringify({
+          error: `Unknown route: ${request.method} ${request.url}`
+        }),
+        {
+          status: 404,
+          headers: {
+            "content-type": "application/json"
+          }
+        }
+      );
+    }
+  } else {
+    return void 0;
+  }
+}
+
 // pkg/dist-src/index.js
 var App = class {
   static VERSION = VERSION;
@@ -337,5 +396,6 @@ var App = class {
 };
 export {
   App,
-  createNodeMiddleware
+  createNodeMiddleware,
+  createWebMiddleware
 };
diff --git a/dist-web/index.js.map b/dist-web/index.js.map
index 1b53682db4a81cebd83729599dc66f5dc06ee479..eba56dd72f4116857ff86dd1b37f35a8199ea969 100644
--- a/dist-web/index.js.map
+++ b/dist-web/index.js.map
@@ -1,7 +1,7 @@
 {
   "version": 3,
-  "sources": ["../dist-src/index.js", "../dist-src/version.js", "../dist-src/webhooks.js", "../dist-src/each-installation.js", "../dist-src/get-installation-octokit.js", "../dist-src/each-repository.js", "../dist-src/get-installation-url.js", "../dist-src/middleware/node/index.js"],
-  "sourcesContent": ["import { Octokit as OctokitCore } from \"@octokit/core\";\nimport { createAppAuth } from \"@octokit/auth-app\";\nimport { OAuthApp } from \"@octokit/oauth-app\";\nimport { VERSION } from \"./version.js\";\nimport { webhooks } from \"./webhooks.js\";\nimport { eachInstallationFactory } from \"./each-installation.js\";\nimport { eachRepositoryFactory } from \"./each-repository.js\";\nimport { getInstallationOctokit } from \"./get-installation-octokit.js\";\nimport { getInstallationUrlFactory } from \"./get-installation-url.js\";\nclass App {\n  static VERSION = VERSION;\n  static defaults(defaults) {\n    const AppWithDefaults = class extends this {\n      constructor(...args) {\n        super({\n          ...defaults,\n          ...args[0]\n        });\n      }\n    };\n    return AppWithDefaults;\n  }\n  octokit;\n  // @ts-ignore calling app.webhooks will throw a helpful error when options.webhooks is not set\n  webhooks;\n  // @ts-ignore calling app.oauth will throw a helpful error when options.oauth is not set\n  oauth;\n  getInstallationOctokit;\n  eachInstallation;\n  eachRepository;\n  getInstallationUrl;\n  log;\n  constructor(options) {\n    const Octokit = options.Octokit || OctokitCore;\n    const authOptions = Object.assign(\n      {\n        appId: options.appId,\n        privateKey: options.privateKey\n      },\n      options.oauth ? {\n        clientId: options.oauth.clientId,\n        clientSecret: options.oauth.clientSecret\n      } : {}\n    );\n    const octokitOptions = {\n      authStrategy: createAppAuth,\n      auth: authOptions\n    };\n    if (\"log\" in options && typeof options.log !== \"undefined\") {\n      octokitOptions.log = options.log;\n    }\n    this.octokit = new Octokit(octokitOptions);\n    this.log = Object.assign(\n      {\n        debug: () => {\n        },\n        info: () => {\n        },\n        warn: console.warn.bind(console),\n        error: console.error.bind(console)\n      },\n      options.log\n    );\n    if (options.webhooks) {\n      this.webhooks = webhooks(this.octokit, options.webhooks);\n    } else {\n      Object.defineProperty(this, \"webhooks\", {\n        get() {\n          throw new Error(\"[@octokit/app] webhooks option not set\");\n        }\n      });\n    }\n    if (options.oauth) {\n      this.oauth = new OAuthApp({\n        ...options.oauth,\n        clientType: \"github-app\",\n        Octokit\n      });\n    } else {\n      Object.defineProperty(this, \"oauth\", {\n        get() {\n          throw new Error(\n            \"[@octokit/app] oauth.clientId / oauth.clientSecret options are not set\"\n          );\n        }\n      });\n    }\n    this.getInstallationOctokit = getInstallationOctokit.bind(\n      null,\n      this\n    );\n    this.eachInstallation = eachInstallationFactory(\n      this\n    );\n    this.eachRepository = eachRepositoryFactory(\n      this\n    );\n    this.getInstallationUrl = getInstallationUrlFactory(this);\n  }\n}\nimport { createNodeMiddleware } from \"./middleware/node/index.js\";\nexport {\n  App,\n  createNodeMiddleware\n};\n", "const VERSION = \"16.1.1\";\nexport {\n  VERSION\n};\n", "import { createAppAuth } from \"@octokit/auth-app\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nimport { Webhooks } from \"@octokit/webhooks\";\nfunction webhooks(appOctokit, options) {\n  return new Webhooks({\n    secret: options.secret,\n    transform: async (event) => {\n      if (!(\"installation\" in event.payload) || typeof event.payload.installation !== \"object\") {\n        const octokit2 = new appOctokit.constructor({\n          authStrategy: createUnauthenticatedAuth,\n          auth: {\n            reason: `\"installation\" key missing in webhook event payload`\n          }\n        });\n        return {\n          ...event,\n          octokit: octokit2\n        };\n      }\n      const installationId = event.payload.installation.id;\n      const octokit = await appOctokit.auth({\n        type: \"installation\",\n        installationId,\n        factory(auth) {\n          return new auth.octokit.constructor({\n            ...auth.octokitOptions,\n            authStrategy: createAppAuth,\n            ...{\n              auth: {\n                ...auth,\n                installationId\n              }\n            }\n          });\n        }\n      });\n      octokit.hook.before(\"request\", (options2) => {\n        options2.headers[\"x-github-delivery\"] = event.id;\n      });\n      return {\n        ...event,\n        octokit\n      };\n    }\n  });\n}\nexport {\n  webhooks\n};\n", "import { composePaginateRest } from \"@octokit/plugin-paginate-rest\";\nimport { getInstallationOctokit } from \"./get-installation-octokit.js\";\nfunction eachInstallationFactory(app) {\n  return Object.assign(eachInstallation.bind(null, app), {\n    iterator: eachInstallationIterator.bind(null, app)\n  });\n}\nasync function eachInstallation(app, callback) {\n  const i = eachInstallationIterator(app)[Symbol.asyncIterator]();\n  let result = await i.next();\n  while (!result.done) {\n    await callback(result.value);\n    result = await i.next();\n  }\n}\nfunction eachInstallationIterator(app) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const iterator = composePaginateRest.iterator(\n        app.octokit,\n        \"GET /app/installations\"\n      );\n      for await (const { data: installations } of iterator) {\n        for (const installation of installations) {\n          const installationOctokit = await getInstallationOctokit(\n            app,\n            installation.id\n          );\n          yield { octokit: installationOctokit, installation };\n        }\n      }\n    }\n  };\n}\nexport {\n  eachInstallation,\n  eachInstallationFactory,\n  eachInstallationIterator\n};\n", "import { createAppAuth } from \"@octokit/auth-app\";\nasync function getInstallationOctokit(app, installationId) {\n  return app.octokit.auth({\n    type: \"installation\",\n    installationId,\n    factory(auth) {\n      const options = {\n        ...auth.octokitOptions,\n        authStrategy: createAppAuth,\n        ...{ auth: { ...auth, installationId } }\n      };\n      return new auth.octokit.constructor(options);\n    }\n  });\n}\nexport {\n  getInstallationOctokit\n};\n", "import { composePaginateRest } from \"@octokit/plugin-paginate-rest\";\nfunction eachRepositoryFactory(app) {\n  return Object.assign(eachRepository.bind(null, app), {\n    iterator: eachRepositoryIterator.bind(null, app)\n  });\n}\nasync function eachRepository(app, queryOrCallback, callback) {\n  const i = eachRepositoryIterator(\n    app,\n    callback ? queryOrCallback : void 0\n  )[Symbol.asyncIterator]();\n  let result = await i.next();\n  while (!result.done) {\n    if (callback) {\n      await callback(result.value);\n    } else {\n      await queryOrCallback(result.value);\n    }\n    result = await i.next();\n  }\n}\nfunction singleInstallationIterator(app, installationId) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      yield {\n        octokit: await app.getInstallationOctokit(installationId)\n      };\n    }\n  };\n}\nfunction eachRepositoryIterator(app, query) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const iterator = query ? singleInstallationIterator(app, query.installationId) : app.eachInstallation.iterator();\n      for await (const { octokit } of iterator) {\n        const repositoriesIterator = composePaginateRest.iterator(\n          octokit,\n          \"GET /installation/repositories\"\n        );\n        for await (const { data: repositories } of repositoriesIterator) {\n          for (const repository of repositories) {\n            yield { octokit, repository };\n          }\n        }\n      }\n    }\n  };\n}\nexport {\n  eachRepository,\n  eachRepositoryFactory,\n  eachRepositoryIterator\n};\n", "function getInstallationUrlFactory(app) {\n  let installationUrlBasePromise;\n  return async function getInstallationUrl(options = {}) {\n    if (!installationUrlBasePromise) {\n      installationUrlBasePromise = getInstallationUrlBase(app);\n    }\n    const installationUrlBase = await installationUrlBasePromise;\n    const installationUrl = new URL(installationUrlBase);\n    if (options.target_id !== void 0) {\n      installationUrl.pathname += \"/permissions\";\n      installationUrl.searchParams.append(\n        \"target_id\",\n        options.target_id.toFixed()\n      );\n    }\n    if (options.state !== void 0) {\n      installationUrl.searchParams.append(\"state\", options.state);\n    }\n    return installationUrl.href;\n  };\n}\nasync function getInstallationUrlBase(app) {\n  const { data: appInfo } = await app.octokit.request(\"GET /app\");\n  if (!appInfo) {\n    throw new Error(\"[@octokit/app] unable to fetch metadata for app\");\n  }\n  return `${appInfo.html_url}/installations/new`;\n}\nexport {\n  getInstallationUrlFactory\n};\n", "import {\n  createNodeMiddleware as oauthNodeMiddleware,\n  sendNodeResponse,\n  unknownRouteResponse\n} from \"@octokit/oauth-app\";\nimport { createNodeMiddleware as webhooksNodeMiddleware } from \"@octokit/webhooks\";\nfunction noop() {\n}\nfunction createNodeMiddleware(app, options = {}) {\n  const log = Object.assign(\n    {\n      debug: noop,\n      info: noop,\n      warn: console.warn.bind(console),\n      error: console.error.bind(console)\n    },\n    options.log\n  );\n  const optionsWithDefaults = {\n    pathPrefix: \"/api/github\",\n    ...options,\n    log\n  };\n  const webhooksMiddleware = webhooksNodeMiddleware(app.webhooks, {\n    path: optionsWithDefaults.pathPrefix + \"/webhooks\",\n    log\n  });\n  const oauthMiddleware = oauthNodeMiddleware(app.oauth, {\n    pathPrefix: optionsWithDefaults.pathPrefix + \"/oauth\"\n  });\n  return middleware.bind(\n    null,\n    optionsWithDefaults.pathPrefix,\n    webhooksMiddleware,\n    oauthMiddleware\n  );\n}\nasync function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, request, response, next) {\n  const { pathname } = new URL(request.url, \"http://localhost\");\n  if (pathname.startsWith(`${pathPrefix}/`)) {\n    if (pathname === `${pathPrefix}/webhooks`) {\n      webhooksMiddleware(request, response);\n    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {\n      oauthMiddleware(request, response);\n    } else {\n      sendNodeResponse(unknownRouteResponse(request), response);\n    }\n    return true;\n  } else {\n    next?.();\n    return false;\n  }\n}\nexport {\n  createNodeMiddleware,\n  middleware\n};\n"],
-  "mappings": ";AAAA,SAAS,WAAW,mBAAmB;AACvC,SAAS,iBAAAA,sBAAqB;AAC9B,SAAS,gBAAgB;;;ACFzB,IAAM,UAAU;;;ACAhB,SAAS,qBAAqB;AAC9B,SAAS,iCAAiC;AAC1C,SAAS,gBAAgB;AACzB,SAAS,SAAS,YAAY,SAAS;AACrC,SAAO,IAAI,SAAS;AAAA,IAClB,QAAQ,QAAQ;AAAA,IAChB,WAAW,OAAO,UAAU;AAC1B,UAAI,EAAE,kBAAkB,MAAM,YAAY,OAAO,MAAM,QAAQ,iBAAiB,UAAU;AACxF,cAAM,WAAW,IAAI,WAAW,YAAY;AAAA,UAC1C,cAAc;AAAA,UACd,MAAM;AAAA,YACJ,QAAQ;AAAA,UACV;AAAA,QACF,CAAC;AACD,eAAO;AAAA,UACL,GAAG;AAAA,UACH,SAAS;AAAA,QACX;AAAA,MACF;AACA,YAAM,iBAAiB,MAAM,QAAQ,aAAa;AAClD,YAAM,UAAU,MAAM,WAAW,KAAK;AAAA,QACpC,MAAM;AAAA,QACN;AAAA,QACA,QAAQ,MAAM;AACZ,iBAAO,IAAI,KAAK,QAAQ,YAAY;AAAA,YAClC,GAAG,KAAK;AAAA,YACR,cAAc;AAAA,YACd,GAAG;AAAA,cACD,MAAM;AAAA,gBACJ,GAAG;AAAA,gBACH;AAAA,cACF;AAAA,YACF;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AACD,cAAQ,KAAK,OAAO,WAAW,CAAC,aAAa;AAC3C,iBAAS,QAAQ,mBAAmB,IAAI,MAAM;AAAA,MAChD,CAAC;AACD,aAAO;AAAA,QACL,GAAG;AAAA,QACH;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAC;AACH;;;AC7CA,SAAS,2BAA2B;;;ACApC,SAAS,iBAAAC,sBAAqB;AAC9B,eAAe,uBAAuB,KAAK,gBAAgB;AACzD,SAAO,IAAI,QAAQ,KAAK;AAAA,IACtB,MAAM;AAAA,IACN;AAAA,IACA,QAAQ,MAAM;AACZ,YAAM,UAAU;AAAA,QACd,GAAG,KAAK;AAAA,QACR,cAAcA;AAAA,QACd,GAAG,EAAE,MAAM,EAAE,GAAG,MAAM,eAAe,EAAE;AAAA,MACzC;AACA,aAAO,IAAI,KAAK,QAAQ,YAAY,OAAO;AAAA,IAC7C;AAAA,EACF,CAAC;AACH;;;ADZA,SAAS,wBAAwB,KAAK;AACpC,SAAO,OAAO,OAAO,iBAAiB,KAAK,MAAM,GAAG,GAAG;AAAA,IACrD,UAAU,yBAAyB,KAAK,MAAM,GAAG;AAAA,EACnD,CAAC;AACH;AACA,eAAe,iBAAiB,KAAK,UAAU;AAC7C,QAAM,IAAI,yBAAyB,GAAG,EAAE,OAAO,aAAa,EAAE;AAC9D,MAAI,SAAS,MAAM,EAAE,KAAK;AAC1B,SAAO,CAAC,OAAO,MAAM;AACnB,UAAM,SAAS,OAAO,KAAK;AAC3B,aAAS,MAAM,EAAE,KAAK;AAAA,EACxB;AACF;AACA,SAAS,yBAAyB,KAAK;AACrC,SAAO;AAAA,IACL,QAAQ,OAAO,aAAa,IAAI;AAC9B,YAAM,WAAW,oBAAoB;AAAA,QACnC,IAAI;AAAA,QACJ;AAAA,MACF;AACA,uBAAiB,EAAE,MAAM,cAAc,KAAK,UAAU;AACpD,mBAAW,gBAAgB,eAAe;AACxC,gBAAM,sBAAsB,MAAM;AAAA,YAChC;AAAA,YACA,aAAa;AAAA,UACf;AACA,gBAAM,EAAE,SAAS,qBAAqB,aAAa;AAAA,QACrD;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;AEjCA,SAAS,uBAAAC,4BAA2B;AACpC,SAAS,sBAAsB,KAAK;AAClC,SAAO,OAAO,OAAO,eAAe,KAAK,MAAM,GAAG,GAAG;AAAA,IACnD,UAAU,uBAAuB,KAAK,MAAM,GAAG;AAAA,EACjD,CAAC;AACH;AACA,eAAe,eAAe,KAAK,iBAAiB,UAAU;AAC5D,QAAM,IAAI;AAAA,IACR;AAAA,IACA,WAAW,kBAAkB;AAAA,EAC/B,EAAE,OAAO,aAAa,EAAE;AACxB,MAAI,SAAS,MAAM,EAAE,KAAK;AAC1B,SAAO,CAAC,OAAO,MAAM;AACnB,QAAI,UAAU;AACZ,YAAM,SAAS,OAAO,KAAK;AAAA,IAC7B,OAAO;AACL,YAAM,gBAAgB,OAAO,KAAK;AAAA,IACpC;AACA,aAAS,MAAM,EAAE,KAAK;AAAA,EACxB;AACF;AACA,SAAS,2BAA2B,KAAK,gBAAgB;AACvD,SAAO;AAAA,IACL,QAAQ,OAAO,aAAa,IAAI;AAC9B,YAAM;AAAA,QACJ,SAAS,MAAM,IAAI,uBAAuB,cAAc;AAAA,MAC1D;AAAA,IACF;AAAA,EACF;AACF;AACA,SAAS,uBAAuB,KAAK,OAAO;AAC1C,SAAO;AAAA,IACL,QAAQ,OAAO,aAAa,IAAI;AAC9B,YAAM,WAAW,QAAQ,2BAA2B,KAAK,MAAM,cAAc,IAAI,IAAI,iBAAiB,SAAS;AAC/G,uBAAiB,EAAE,QAAQ,KAAK,UAAU;AACxC,cAAM,uBAAuBA,qBAAoB;AAAA,UAC/C;AAAA,UACA;AAAA,QACF;AACA,yBAAiB,EAAE,MAAM,aAAa,KAAK,sBAAsB;AAC/D,qBAAW,cAAc,cAAc;AACrC,kBAAM,EAAE,SAAS,WAAW;AAAA,UAC9B;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;AC/CA,SAAS,0BAA0B,KAAK;AACtC,MAAI;AACJ,SAAO,eAAe,mBAAmB,UAAU,CAAC,GAAG;AACrD,QAAI,CAAC,4BAA4B;AAC/B,mCAA6B,uBAAuB,GAAG;AAAA,IACzD;AACA,UAAM,sBAAsB,MAAM;AAClC,UAAM,kBAAkB,IAAI,IAAI,mBAAmB;AACnD,QAAI,QAAQ,cAAc,QAAQ;AAChC,sBAAgB,YAAY;AAC5B,sBAAgB,aAAa;AAAA,QAC3B;AAAA,QACA,QAAQ,UAAU,QAAQ;AAAA,MAC5B;AAAA,IACF;AACA,QAAI,QAAQ,UAAU,QAAQ;AAC5B,sBAAgB,aAAa,OAAO,SAAS,QAAQ,KAAK;AAAA,IAC5D;AACA,WAAO,gBAAgB;AAAA,EACzB;AACF;AACA,eAAe,uBAAuB,KAAK;AACzC,QAAM,EAAE,MAAM,QAAQ,IAAI,MAAM,IAAI,QAAQ,QAAQ,UAAU;AAC9D,MAAI,CAAC,SAAS;AACZ,UAAM,IAAI,MAAM,iDAAiD;AAAA,EACnE;AACA,SAAO,GAAG,QAAQ,QAAQ;AAC5B;;;AC3BA;AAAA,EACE,wBAAwB;AAAA,EACxB;AAAA,EACA;AAAA,OACK;AACP,SAAS,wBAAwB,8BAA8B;AAC/D,SAAS,OAAO;AAChB;AACA,SAAS,qBAAqB,KAAK,UAAU,CAAC,GAAG;AAC/C,QAAM,MAAM,OAAO;AAAA,IACjB;AAAA,MACE,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM,QAAQ,KAAK,KAAK,OAAO;AAAA,MAC/B,OAAO,QAAQ,MAAM,KAAK,OAAO;AAAA,IACnC;AAAA,IACA,QAAQ;AAAA,EACV;AACA,QAAM,sBAAsB;AAAA,IAC1B,YAAY;AAAA,IACZ,GAAG;AAAA,IACH;AAAA,EACF;AACA,QAAM,qBAAqB,uBAAuB,IAAI,UAAU;AAAA,IAC9D,MAAM,oBAAoB,aAAa;AAAA,IACvC;AAAA,EACF,CAAC;AACD,QAAM,kBAAkB,oBAAoB,IAAI,OAAO;AAAA,IACrD,YAAY,oBAAoB,aAAa;AAAA,EAC/C,CAAC;AACD,SAAO,WAAW;AAAA,IAChB;AAAA,IACA,oBAAoB;AAAA,IACpB;AAAA,IACA;AAAA,EACF;AACF;AACA,eAAe,WAAW,YAAY,oBAAoB,iBAAiB,SAAS,UAAU,MAAM;AAClG,QAAM,EAAE,SAAS,IAAI,IAAI,IAAI,QAAQ,KAAK,kBAAkB;AAC5D,MAAI,SAAS,WAAW,GAAG,UAAU,GAAG,GAAG;AACzC,QAAI,aAAa,GAAG,UAAU,aAAa;AACzC,yBAAmB,SAAS,QAAQ;AAAA,IACtC,WAAW,SAAS,WAAW,GAAG,UAAU,SAAS,GAAG;AACtD,sBAAgB,SAAS,QAAQ;AAAA,IACnC,OAAO;AACL,uBAAiB,qBAAqB,OAAO,GAAG,QAAQ;AAAA,IAC1D;AACA,WAAO;AAAA,EACT,OAAO;AACL,WAAO;AACP,WAAO;AAAA,EACT;AACF;;;AP3CA,IAAM,MAAN,MAAU;AAAA,EACR,OAAO,UAAU;AAAA,EACjB,OAAO,SAAS,UAAU;AACxB,UAAM,kBAAkB,cAAc,KAAK;AAAA,MACzC,eAAe,MAAM;AACnB,cAAM;AAAA,UACJ,GAAG;AAAA,UACH,GAAG,KAAK,CAAC;AAAA,QACX,CAAC;AAAA,MACH;AAAA,IACF;AACA,WAAO;AAAA,EACT;AAAA,EACA;AAAA;AAAA,EAEA;AAAA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,YAAY,SAAS;AACnB,UAAM,UAAU,QAAQ,WAAW;AACnC,UAAM,cAAc,OAAO;AAAA,MACzB;AAAA,QACE,OAAO,QAAQ;AAAA,QACf,YAAY,QAAQ;AAAA,MACtB;AAAA,MACA,QAAQ,QAAQ;AAAA,QACd,UAAU,QAAQ,MAAM;AAAA,QACxB,cAAc,QAAQ,MAAM;AAAA,MAC9B,IAAI,CAAC;AAAA,IACP;AACA,UAAM,iBAAiB;AAAA,MACrB,cAAcC;AAAA,MACd,MAAM;AAAA,IACR;AACA,QAAI,SAAS,WAAW,OAAO,QAAQ,QAAQ,aAAa;AAC1D,qBAAe,MAAM,QAAQ;AAAA,IAC/B;AACA,SAAK,UAAU,IAAI,QAAQ,cAAc;AACzC,SAAK,MAAM,OAAO;AAAA,MAChB;AAAA,QACE,OAAO,MAAM;AAAA,QACb;AAAA,QACA,MAAM,MAAM;AAAA,QACZ;AAAA,QACA,MAAM,QAAQ,KAAK,KAAK,OAAO;AAAA,QAC/B,OAAO,QAAQ,MAAM,KAAK,OAAO;AAAA,MACnC;AAAA,MACA,QAAQ;AAAA,IACV;AACA,QAAI,QAAQ,UAAU;AACpB,WAAK,WAAW,SAAS,KAAK,SAAS,QAAQ,QAAQ;AAAA,IACzD,OAAO;AACL,aAAO,eAAe,MAAM,YAAY;AAAA,QACtC,MAAM;AACJ,gBAAM,IAAI,MAAM,wCAAwC;AAAA,QAC1D;AAAA,MACF,CAAC;AAAA,IACH;AACA,QAAI,QAAQ,OAAO;AACjB,WAAK,QAAQ,IAAI,SAAS;AAAA,QACxB,GAAG,QAAQ;AAAA,QACX,YAAY;AAAA,QACZ;AAAA,MACF,CAAC;AAAA,IACH,OAAO;AACL,aAAO,eAAe,MAAM,SAAS;AAAA,QACnC,MAAM;AACJ,gBAAM,IAAI;AAAA,YACR;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AACA,SAAK,yBAAyB,uBAAuB;AAAA,MACnD;AAAA,MACA;AAAA,IACF;AACA,SAAK,mBAAmB;AAAA,MACtB;AAAA,IACF;AACA,SAAK,iBAAiB;AAAA,MACpB;AAAA,IACF;AACA,SAAK,qBAAqB,0BAA0B,IAAI;AAAA,EAC1D;AACF;",
-  "names": ["createAppAuth", "createAppAuth", "composePaginateRest", "createAppAuth"]
+  "sources": ["../dist-src/index.js", "../dist-src/version.js", "../dist-src/webhooks.js", "../dist-src/each-installation.js", "../dist-src/get-installation-octokit.js", "../dist-src/each-repository.js", "../dist-src/get-installation-url.js", "../dist-src/middleware/node/index.js", "../dist-src/middleware/web/index.js"],
+  "sourcesContent": ["import { Octokit as OctokitCore } from \"@octokit/core\";\nimport { createAppAuth } from \"@octokit/auth-app\";\nimport { OAuthApp } from \"@octokit/oauth-app\";\nimport { VERSION } from \"./version.js\";\nimport { webhooks } from \"./webhooks.js\";\nimport { eachInstallationFactory } from \"./each-installation.js\";\nimport { eachRepositoryFactory } from \"./each-repository.js\";\nimport { getInstallationOctokit } from \"./get-installation-octokit.js\";\nimport { getInstallationUrlFactory } from \"./get-installation-url.js\";\nclass App {\n  static VERSION = VERSION;\n  static defaults(defaults) {\n    const AppWithDefaults = class extends this {\n      constructor(...args) {\n        super({\n          ...defaults,\n          ...args[0]\n        });\n      }\n    };\n    return AppWithDefaults;\n  }\n  octokit;\n  // @ts-ignore calling app.webhooks will throw a helpful error when options.webhooks is not set\n  webhooks;\n  // @ts-ignore calling app.oauth will throw a helpful error when options.oauth is not set\n  oauth;\n  getInstallationOctokit;\n  eachInstallation;\n  eachRepository;\n  getInstallationUrl;\n  log;\n  constructor(options) {\n    const Octokit = options.Octokit || OctokitCore;\n    const authOptions = Object.assign(\n      {\n        appId: options.appId,\n        privateKey: options.privateKey\n      },\n      options.oauth ? {\n        clientId: options.oauth.clientId,\n        clientSecret: options.oauth.clientSecret\n      } : {}\n    );\n    const octokitOptions = {\n      authStrategy: createAppAuth,\n      auth: authOptions\n    };\n    if (\"log\" in options && typeof options.log !== \"undefined\") {\n      octokitOptions.log = options.log;\n    }\n    this.octokit = new Octokit(octokitOptions);\n    this.log = Object.assign(\n      {\n        debug: () => {\n        },\n        info: () => {\n        },\n        warn: console.warn.bind(console),\n        error: console.error.bind(console)\n      },\n      options.log\n    );\n    if (options.webhooks) {\n      this.webhooks = webhooks(this.octokit, options.webhooks);\n    } else {\n      Object.defineProperty(this, \"webhooks\", {\n        get() {\n          throw new Error(\"[@octokit/app] webhooks option not set\");\n        }\n      });\n    }\n    if (options.oauth) {\n      this.oauth = new OAuthApp({\n        ...options.oauth,\n        clientType: \"github-app\",\n        Octokit\n      });\n    } else {\n      Object.defineProperty(this, \"oauth\", {\n        get() {\n          throw new Error(\n            \"[@octokit/app] oauth.clientId / oauth.clientSecret options are not set\"\n          );\n        }\n      });\n    }\n    this.getInstallationOctokit = getInstallationOctokit.bind(\n      null,\n      this\n    );\n    this.eachInstallation = eachInstallationFactory(\n      this\n    );\n    this.eachRepository = eachRepositoryFactory(\n      this\n    );\n    this.getInstallationUrl = getInstallationUrlFactory(this);\n  }\n}\nimport { createNodeMiddleware } from \"./middleware/node/index.js\";\nimport { createWebMiddleware } from \"./middleware/web/index.js\";\nexport {\n  App,\n  createNodeMiddleware,\n  createWebMiddleware\n};\n", "const VERSION = \"0.0.0-development\";\nexport {\n  VERSION\n};\n", "import { createAppAuth } from \"@octokit/auth-app\";\nimport { createUnauthenticatedAuth } from \"@octokit/auth-unauthenticated\";\nimport { Webhooks } from \"@octokit/webhooks\";\nfunction webhooks(appOctokit, options) {\n  return new Webhooks({\n    secret: options.secret,\n    transform: async (event) => {\n      if (!(\"installation\" in event.payload) || typeof event.payload.installation !== \"object\") {\n        const octokit2 = new appOctokit.constructor({\n          authStrategy: createUnauthenticatedAuth,\n          auth: {\n            reason: `\"installation\" key missing in webhook event payload`\n          }\n        });\n        return {\n          ...event,\n          octokit: octokit2\n        };\n      }\n      const installationId = event.payload.installation.id;\n      const octokit = await appOctokit.auth({\n        type: \"installation\",\n        installationId,\n        factory(auth) {\n          return new auth.octokit.constructor({\n            ...auth.octokitOptions,\n            authStrategy: createAppAuth,\n            ...{\n              auth: {\n                ...auth,\n                installationId\n              }\n            }\n          });\n        }\n      });\n      octokit.hook.before(\"request\", (options2) => {\n        options2.headers[\"x-github-delivery\"] = event.id;\n      });\n      return {\n        ...event,\n        octokit\n      };\n    }\n  });\n}\nexport {\n  webhooks\n};\n", "import { composePaginateRest } from \"@octokit/plugin-paginate-rest\";\nimport { getInstallationOctokit } from \"./get-installation-octokit.js\";\nfunction eachInstallationFactory(app) {\n  return Object.assign(eachInstallation.bind(null, app), {\n    iterator: eachInstallationIterator.bind(null, app)\n  });\n}\nasync function eachInstallation(app, callback) {\n  const i = eachInstallationIterator(app)[Symbol.asyncIterator]();\n  let result = await i.next();\n  while (!result.done) {\n    await callback(result.value);\n    result = await i.next();\n  }\n}\nfunction eachInstallationIterator(app) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const iterator = composePaginateRest.iterator(\n        app.octokit,\n        \"GET /app/installations\"\n      );\n      for await (const { data: installations } of iterator) {\n        for (const installation of installations) {\n          const installationOctokit = await getInstallationOctokit(\n            app,\n            installation.id\n          );\n          yield { octokit: installationOctokit, installation };\n        }\n      }\n    }\n  };\n}\nexport {\n  eachInstallation,\n  eachInstallationFactory,\n  eachInstallationIterator\n};\n", "import { createAppAuth } from \"@octokit/auth-app\";\nasync function getInstallationOctokit(app, installationId) {\n  return app.octokit.auth({\n    type: \"installation\",\n    installationId,\n    factory(auth) {\n      const options = {\n        ...auth.octokitOptions,\n        authStrategy: createAppAuth,\n        ...{ auth: { ...auth, installationId } }\n      };\n      return new auth.octokit.constructor(options);\n    }\n  });\n}\nexport {\n  getInstallationOctokit\n};\n", "import { composePaginateRest } from \"@octokit/plugin-paginate-rest\";\nfunction eachRepositoryFactory(app) {\n  return Object.assign(eachRepository.bind(null, app), {\n    iterator: eachRepositoryIterator.bind(null, app)\n  });\n}\nasync function eachRepository(app, queryOrCallback, callback) {\n  const i = eachRepositoryIterator(\n    app,\n    callback ? queryOrCallback : void 0\n  )[Symbol.asyncIterator]();\n  let result = await i.next();\n  while (!result.done) {\n    if (callback) {\n      await callback(result.value);\n    } else {\n      await queryOrCallback(result.value);\n    }\n    result = await i.next();\n  }\n}\nfunction singleInstallationIterator(app, installationId) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      yield {\n        octokit: await app.getInstallationOctokit(installationId)\n      };\n    }\n  };\n}\nfunction eachRepositoryIterator(app, query) {\n  return {\n    async *[Symbol.asyncIterator]() {\n      const iterator = query ? singleInstallationIterator(app, query.installationId) : app.eachInstallation.iterator();\n      for await (const { octokit } of iterator) {\n        const repositoriesIterator = composePaginateRest.iterator(\n          octokit,\n          \"GET /installation/repositories\"\n        );\n        for await (const { data: repositories } of repositoriesIterator) {\n          for (const repository of repositories) {\n            yield { octokit, repository };\n          }\n        }\n      }\n    }\n  };\n}\nexport {\n  eachRepository,\n  eachRepositoryFactory,\n  eachRepositoryIterator\n};\n", "function getInstallationUrlFactory(app) {\n  let installationUrlBasePromise;\n  return async function getInstallationUrl(options = {}) {\n    if (!installationUrlBasePromise) {\n      installationUrlBasePromise = getInstallationUrlBase(app);\n    }\n    const installationUrlBase = await installationUrlBasePromise;\n    const installationUrl = new URL(installationUrlBase);\n    if (options.target_id !== void 0) {\n      installationUrl.pathname += \"/permissions\";\n      installationUrl.searchParams.append(\n        \"target_id\",\n        options.target_id.toFixed()\n      );\n    }\n    if (options.state !== void 0) {\n      installationUrl.searchParams.append(\"state\", options.state);\n    }\n    return installationUrl.href;\n  };\n}\nasync function getInstallationUrlBase(app) {\n  const { data: appInfo } = await app.octokit.request(\"GET /app\");\n  if (!appInfo) {\n    throw new Error(\"[@octokit/app] unable to fetch metadata for app\");\n  }\n  return `${appInfo.html_url}/installations/new`;\n}\nexport {\n  getInstallationUrlFactory\n};\n", "import {\n  createNodeMiddleware as oauthNodeMiddleware,\n  sendNodeResponse,\n  unknownRouteResponse\n} from \"@octokit/oauth-app\";\nimport { createNodeMiddleware as webhooksNodeMiddleware } from \"@octokit/webhooks\";\nfunction noop() {\n}\nfunction createNodeMiddleware(app, options = {}) {\n  const log = Object.assign(\n    {\n      debug: noop,\n      info: noop,\n      warn: console.warn.bind(console),\n      error: console.error.bind(console)\n    },\n    options.log\n  );\n  const optionsWithDefaults = {\n    pathPrefix: \"/api/github\",\n    ...options,\n    log\n  };\n  const webhooksMiddleware = webhooksNodeMiddleware(app.webhooks, {\n    path: optionsWithDefaults.pathPrefix + \"/webhooks\",\n    log\n  });\n  const oauthMiddleware = oauthNodeMiddleware(app.oauth, {\n    pathPrefix: optionsWithDefaults.pathPrefix + \"/oauth\"\n  });\n  return middleware.bind(\n    null,\n    optionsWithDefaults.pathPrefix,\n    webhooksMiddleware,\n    oauthMiddleware\n  );\n}\nasync function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, request, response, next) {\n  const { pathname } = new URL(request.url, \"http://localhost\");\n  if (pathname.startsWith(`${pathPrefix}/`)) {\n    if (pathname === `${pathPrefix}/webhooks`) {\n      webhooksMiddleware(request, response);\n    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {\n      oauthMiddleware(request, response);\n    } else {\n      sendNodeResponse(unknownRouteResponse(request), response);\n    }\n    return true;\n  } else {\n    next?.();\n    return false;\n  }\n}\nexport {\n  createNodeMiddleware,\n  middleware\n};\n", "import { createWebWorkerHandler as oauthWebMiddleware } from \"@octokit/oauth-app\";\nimport { createWebMiddleware as webhooksWebMiddleware } from \"@octokit/webhooks\";\nfunction noop() {\n}\nfunction createWebMiddleware(app, options = {}) {\n  const log = Object.assign(\n    {\n      debug: noop,\n      info: noop,\n      warn: console.warn.bind(console),\n      error: console.error.bind(console)\n    },\n    options.log\n  );\n  const optionsWithDefaults = {\n    pathPrefix: \"/api/github\",\n    ...options,\n    log\n  };\n  const webhooksMiddleware = webhooksWebMiddleware(app.webhooks, {\n    path: optionsWithDefaults.pathPrefix + \"/webhooks\",\n    log\n  });\n  const oauthMiddleware = oauthWebMiddleware(app.oauth, {\n    pathPrefix: optionsWithDefaults.pathPrefix + \"/oauth\"\n  });\n  return middleware.bind(\n    null,\n    optionsWithDefaults.pathPrefix,\n    webhooksMiddleware,\n    oauthMiddleware\n  );\n}\nasync function middleware(pathPrefix, webhooksMiddleware, oauthMiddleware, request) {\n  const { pathname } = new URL(request.url, \"http://localhost\");\n  if (pathname.startsWith(`${pathPrefix}/`)) {\n    if (pathname === `${pathPrefix}/webhooks`) {\n      return webhooksMiddleware(request);\n    } else if (pathname.startsWith(`${pathPrefix}/oauth/`)) {\n      return oauthMiddleware(request);\n    } else {\n      return new Response(\n        JSON.stringify({\n          error: `Unknown route: ${request.method} ${request.url}`\n        }),\n        {\n          status: 404,\n          headers: {\n            \"content-type\": \"application/json\"\n          }\n        }\n      );\n    }\n  } else {\n    return void 0;\n  }\n}\nexport {\n  createWebMiddleware,\n  middleware\n};\n"],
+  "mappings": "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",
+  "names": ["createAppAuth", "createAppAuth", "composePaginateRest", "noop", "middleware", "createAppAuth"]
 }
diff --git a/package.json b/package.json
index f5fe3137af5601b0f1e6afd5bbcc28fd2c063007..fdd3080b85c60827a78cd2ae2be2783decd55168 100644
--- a/package.json
+++ b/package.json
@@ -12,23 +12,24 @@
   "author": "Gregor Martynus (https://github.com/gr2m)",
   "license": "MIT",
   "dependencies": {
-    "@octokit/auth-app": "^8.1.1",
-    "@octokit/auth-unauthenticated": "^7.0.2",
-    "@octokit/core": "^7.0.5",
-    "@octokit/oauth-app": "^8.0.2",
-    "@octokit/plugin-paginate-rest": "^13.2.0",
-    "@octokit/types": "^15.0.0",
+    "@octokit/auth-app": "^8.0.1",
+    "@octokit/auth-unauthenticated": "^7.0.1",
+    "@octokit/core": "^7.0.2",
+    "@octokit/oauth-app": "^8.0.1",
+    "@octokit/plugin-paginate-rest": "^13.0.0",
+    "@octokit/types": "^14.0.0",
     "@octokit/webhooks": "^14.0.0"
   },
   "devDependencies": {
     "@octokit/tsconfig": "^4.0.0",
     "@types/node": "^22.0.0",
     "@vitest/coverage-v8": "^3.0.0",
+    "@mjackson/node-fetch-server": "^0.6.1",
     "esbuild": "^0.25.0",
     "express": "^4.17.1",
     "fetch-mock": "^12.0.0",
     "mockdate": "^3.0.2",
-    "prettier": "3.6.2",
+    "prettier": "3.5.3",
     "semantic-release-plugin-update-version-in-files": "^2.0.0",
     "tinyglobby": "^0.2.13",
     "typescript": "^5.0.0",
